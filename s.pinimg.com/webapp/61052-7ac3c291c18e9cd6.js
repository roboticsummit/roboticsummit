(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[61052],{821887:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(399902),o=n(898781),i=n(965708),a=n(294545),l=n(217468),s=n(937666),u=n(194095),c=n(908390),d=n(53987),p=n(515198);function f(e){var t,n,f,h=e.onOpenInAppClick,m=(0,o.ZP)(),_=(t=(0,i.Z)(),n=(0,s.TH)(),f=(0,l.tc)("mweb_mini_renux")({dangerouslySkipActivation:!0}).anyEnabled,function(){return"undefined"!=typeof window&&!(t&&(0,d.wy)(n)&&f&&!(0,r.Z)())&&(0,d.L6)(n)});return(0,p.jsx)(a.FixedFooter,{footerInLego:!0,appUpsellFooterConfig:{shouldShowAfterScroll:function(){var e=_();return e&&(0,u.y)(),e}},hideOnScroll:!0,noPadding:!0,children:(0,p.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"around",marginEnd:4,marginStart:4,maxWidth:264,children:(0,p.jsx)(c.iP,{onTap:h,children:(0,p.jsxs)(c.xu,{alignItems:"center",display:"flex",paddingY:4,children:[(0,p.jsx)(c.xu,{marginEnd:2,children:(0,p.jsx)(c.JO,{accessibilityLabel:m._('Pinterest logo', 'AppUpsellFooter.icon', 'Pinterest logo icon for app upsell footer'),color:"brandPrimary",icon:"pinterest",inline:!0,size:24})}),(0,p.jsx)(c.xv,{weight:"bold",children:m._('Open in app', 'AppUpsellFooter.text.open', 'Short phrase for footer to upsell installing the app')})]})})})})}function h(e){var t=e.clientTrackingParams,n=e.onOpenInApp,r=e.viewParameter,o=e.viewType;return(0,p.jsx)(u.Z,{clientTrackingParams:t,viewParameter:r,viewType:o,children:(0,p.jsx)(f,{onOpenInAppClick:function(){(0,u.y)(),n()}})})}},399902:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(957161);function o(){var e=(0,r.qn)("lastViewedMiniRenux");return!!e&&Date.now()-Number(e)<2592e5}},631193:function(e,t,n){"use strict";var r=n(48676),o=n(436851),i=n(826067),a=n(937666),l=n(870167);t.Z=function(){var e=(0,a.TH)(),t=(0,l.a)(),n=(0,r.useSelector)((function(e){return e.session})),s=n.locale,u=n.userAgentPlatform,c=n.userAgent;if(!t)return!1;var d=t.appInstallBannerIsEnabled,p=t.pinPageGlobalContext,f=!!(0,i.mB)(e.search).invite_code;return d&&!(0,o.$)(c)&&!(s.includes("ar")&&"ios"!==u)&&!(!0===(null==p?void 0:p.isStoryPin)&&f)}},125920:function(e,t,n){"use strict";var r=n(48676),o=n(172071),i=n(949372),a=n(436851),l=n(968228),s=n(50286),u=n(937666),c=n(780280),d=n(419940),p=n(622096),f=n(53987);t.Z=function(){var e=(0,c.B)().isBot,t=(0,u.TH)(),n=(0,r.useSelector)((function(e){return e.session})),h=n.userAgentPlatform,m=n.userAgent,_=(0,i.Z)(),g=(0,s.ml)();return!e&&!(g&&!_)&&!(0,l.Rp)({platform:h,userAgent:m})&&((0,f.uM)(t)||(0,f.am)(t))&&!(0,d.P)()&&!function(e){return!!(0,a.d)(e)&&((0,p.qn)("ufausfiiab")||(o.Z.increment("unauth.floating_app_upsell.suppress_for_instagram_in_app_browser"),(0,p.Nh)("ufausfiiab","1")),!0)}(m)}},81072:function(e,t,n){"use strict";var r=n(76911),o=n(2284),i=n.n(o);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(){var e=a((0,r.useState)(0),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=i()((function(){return n(window.scrollY)}),10);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),t}},361052:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return It}});var r=n(76911),o=n(48676),i=n(231486),a=n(319915),l=n(419940),s=n(937666),u=n(622096),c=n(704177),d=n(53987),p=function(e){var t,n=e.newLocation,r=e.oldLocation;return(t=n)&&!!t.key&&(0,d.L6)(n)&&((0,d.L6)(r)||(0,d.am)(r)||(0,d.cD)(r)||(0,d.En)(r))&&!(0,u.qn)("openUnauthType")&&!function(){if("undefined"==typeof window)return!1;var e=c.ZP.sessionStorage.getItem("susdst"),t=c.ZP.sessionStorage.getItem("susdd");return!!e&&!!t&&(new Date).getTime()-e<=t}()};function f(e){var t,n,o,i=e.context;return t={mobileSignupModalContext:i}.mobileSignupModalContext,n=(0,s.TH)(),o=(0,r.useRef)(n),(0,r.useEffect)((function(){var e,r,i,a=o.current,s=n;if(!(a===s||(r=a,i=s,r===i||r&&i&&r.pathname===i.pathname)||(e=s.pathname,e.includes("_created")||e.includes("boards")))){(0,l.C)(s);var u=t.showMobileSignupModal,c=t.dismissMobileSignupModal,d=t.incrementUpsellEligibleNavigationCount,f=t.upsellIsEnabledGlobally,h=t.upsellEligibleNavigationCount;t.modal.isShown?c():f()&&p({newLocation:s,oldLocation:a})&&(h>=3?u({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation",navigationTriggeredUpsell:{newLocation:s,oldLocation:a}}):d())}o.current=n}),[n,t]),null}var h=n(947599),m=n(474635),_=n(821887),g=n(430322),b=n(908390),v=n(963339),y=n(515198),x=function(e){var t=e.children,n=e.isOpen,r=e.onDismiss,o=e.type;return(0,y.jsx)(g.default,{accessibilityModalLabel:"",mobileAllowScroll:!0,mobileHideCloseIcon:!0,isOpen:n,modalStyle:{border:(0,v.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1},onDismiss:r,type:o,children:(0,y.jsx)(b.xu,{padding:4,children:t})})},w=n(898781),j=n(142958);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){var t,n=e.invite,o=(0,w.ZP)(),i=S((0,r.useState)(!0),2),a=i[0],l=i[1],u=(0,s.TH)(),c=(null==n||null===(t=n.sender)||void 0===t?void 0:t.first_name)||"",d=(0,j.U)().isNavFooterHiddenAfterScroll;return(0,y.jsx)(x,{isOpen:d&&a,onDismiss:function(){return l(!1)},type:"unauth_toast_upsell",children:(0,y.jsxs)(b.xu,{padding:2,children:[c&&(0,y.jsx)(b.xu,{marginBottom:4,children:(0,y.jsx)(b.xv,{overflow:"normal",weight:"bold",align:"center",children:(o._('Join {{ name }} on Pinterest for more ideas', 'Prompt user to signup to access all Pinterest features', 'Prompt user to signup to access all Pinterest features')).replace("{{ name }}",c)})}),(0,y.jsx)(m.Z,{componentType:13404,within:"footer-banner",children:function(e){var t=e.handleOpenApp;return(0,y.jsx)(b.zx,{fullWidth:!0,color:"red",onClick:function(){return t({deepLinkUri:u.pathname.concat(u.search).substr(1)})},size:"md",text:o._('Open in app', 'Opens the Pin in the Pinterest app', 'Opens the Pin in the Pinterest app')})}})]})})}var O=n(116303),I=n(659602),T=n(30700),z=n(276881),k=n(172071),C=n(966113),E=n(977981),Z=n(349700);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=1e3,J={visible:{transform:"translateY(0)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},hiding:{transform:"translateY(350px)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},wash:{backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100%",touchAction:"none",width:"100%",zIndex:10001,position:"fixed",top:0,left:0},mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",touchAction:"none",width:"100%",zIndex:1}}},q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(i,e);var t,n,r,o=R(i);function i(){var e;M(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(N(e=o.call.apply(o,[this].concat(n))),"state",{visible:!1,hiding:!1,showWash:!1}),Y(N(e),"getTitle",(function(){var t=e.props.invite,n=t&&t.sender,r=n&&n.first_name;return(e.props.i18n._('Join {{ name }} on Pinterest for more ideas', 'Prompt user to signup to access all Pinterest features', 'Prompt user to signup to access all Pinterest features')).replace("{{ name }}",r||"")})),Y(N(e),"getAvatar",(function(){var t=e.props.invite,n=t&&t.sender,r=n&&n.image_medium_url,o=n&&n.full_name;return(0,y.jsx)(O.Z,{src:r||"",name:o||"",size:"sm"})})),Y(N(e),"handleHide",(function(){var t=e.props.onDismiss;k.Z.increment("mweb_facebook_social_upsell.close"),e.setState({hiding:!0,showWash:!1}),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){t&&t()}),G)}))})),Y(N(e),"handleHideOutsideTap",(function(){var t=e.props.onDismiss;k.Z.increment("mweb_facebook_social_upsell.close.outside.modal"),e.setState({hiding:!0,showWash:!1}),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){t&&t()}),G)}))})),Y(N(e),"handleFBConnect",(function(e){k.Z.increment("mweb_facebook_social_upsell.fb_connect_button_click.".concat(e))})),Y(N(e),"handleSignupClick",(function(){k.Z.increment("mweb_facebook_social_upsell.signup_button_click"),e.props.history.push({pathname:"/",state:{from:e.props.location.pathname,next:e.props.location.pathname}})})),Y(N(e),"initializeShowAnimation",(function(){k.Z.increment("mweb_facebook_social_upsell.shown"),e.slideInAnimation=window.requestAnimationFrame((function(){setTimeout((function(){e.setState({visible:!0})}),G)}))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){k.Z.increment("mweb_facebook_social_upsell.land");var e=this.props.invite,t=e?e.invite_channel:null;t&&k.Z.increment("mweb_social_unauth.invite_channel.".concat(t)),this.initializeShowAnimation()}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.slideInAnimation)}},{key:"renderDefaultLoginHeader",value:function(){return(0,y.jsxs)(b.xu,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,justifyContent:"center",children:[(0,y.jsxs)(b.xu,{alignItems:"center",display:"flex",direction:"column",marginBottom:5,children:[(0,y.jsx)(b.xu,{children:(0,y.jsx)(b.xv,{align:"start",weight:"bold",children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._('Sign up to see more', 'Title on mobile web signup modal to prompt users to signup for Pinterest.', 'Title on mobile web signup modal to prompt users to signup for Pinterest.')})})}),(0,y.jsx)(b.xu,{marginBottom:1}),(0,y.jsx)(b.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,y.jsx)(b.xv,{align:"start",children:this.props.i18n._('Free, unlimited access to ideas', 'First value prop on mobile web sign up modal', 'First value prop on mobile web sign up modal')})})]}),(0,y.jsx)(b.iz,{})]})}},{key:"renderInviterHeader",value:function(){return(0,y.jsxs)(b.xu,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,children:[(0,y.jsxs)(b.xu,{alignItems:"center",direction:"row",display:"flex",paddingY:3,children:[(0,y.jsx)(b.xu,{children:(0,y.jsx)(b.xv,{align:"start",weight:"bold",children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:this.getTitle()})})}),(0,y.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"26%"}},children:this.getAvatar()})]}),(0,y.jsx)(b.iz,{})]})}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.invite,r=this.state,o=r.visible,i=r.hiding,a=r.showWash,l=C.Z.settings.LOGIN_URL,s=n?n.sender:null,u=o&&!i?J.visible:J.hiding;return(0,y.jsxs)(b.xu,{dangerouslySetInlineStyle:{__style:a?J.wash:{}},children:[o&&!i?(0,y.jsx)(T.Z,{onTouch:this.handleHideOutsideTap,pressState:"none",children:(0,y.jsx)(b.xu,{position:"fixed",top:!0,left:!0,opacity:1,dangerouslySetInlineStyle:{__style:J.mask.baseStyles}})}):null,(0,y.jsx)(b.xu,{position:"fixed",bottom:!0,color:"white",paddingX:6,width:"100%",zIndex:new b.Ry(10001),dangerouslySetInlineStyle:{__style:B(B({},u),{},{boxShadow:"0 1px 5px 0 rgba(0,0,0,0.25)",paddingBottom:"5%",paddingTop:"2%",touchAction:"none"})},children:(0,y.jsxs)(b.xu,{maxWidth:400,marginStart:"auto",marginEnd:"auto",children:[(0,y.jsx)(b.xu,{paddingY:2}),(0,y.jsx)(b.xu,{position:"absolute",left:!0,top:!0,marginStart:4,marginTop:2,children:(0,y.jsx)(I.Z,{accessibilityLabel:this.props.i18n._('Close modal', 'Close the modal for facebook upsell', 'Close the modal for facebook upsell'),icon:"cancel",onTouch:this.handleHide,size:"sm"})}),(0,y.jsx)(b.xu,{paddingY:2}),s?this.renderInviterHeader():this.renderDefaultLoginHeader(),(0,y.jsx)(b.xu,{marginBottom:1,height:40,children:(0,y.jsx)(z.Z,{facebookText:this.props.i18n._('Continue with Facebook', 'Button to login or signup with FB on Facebook', 'Button to login or signup with FB on Facebook'),from:t.pathname,next:t.pathname,fbButtonType:"continue",fbUseContinueAs:!0,fbConnectHandler:this.handleFBConnect})}),(0,y.jsx)(b.xu,{marginBottom:1,marginTop:2,children:(0,y.jsx)(b.zx,{fullWidth:!0,onClick:this.handleSignupClick,color:"gray",text:this.props.i18n._('Sign Up', 'Button to redirect user to Signup Page on mweb', 'Button to redirect user to Signup Page on mweb')})}),(0,y.jsx)(b.xu,{marginTop:3,children:(0,y.jsx)(b.xv,{color:"subtle",align:"center",size:"100",children:(0,Z.nk)(this.props.i18n._('Have an account? {{ logIn }}', 'Asking users if they already have an account', 'Asking users if they already have an account'),{logIn:(0,y.jsx)(b.rU,{href:l,inline:!0,onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},underline:"hover",children:(0,y.jsx)(b.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:this.props.i18n._('Log in', 'Mobile web link to log in page', 'Mobile web link to log in page')})})})})}),(0,y.jsx)(b.xu,{marginTop:3,children:(0,y.jsx)(E.Z,{size:"xs"})})]})})]})}}])&&U(t.prototype,n),r&&U(t,r),i}(r.PureComponent);function X(e){var t=(0,s.k6)(),n=(0,s.TH)(),r=(0,w.ZP)();return(0,y.jsx)(q,B(B({},e),{},{history:t,i18n:r,location:n}))}var $=n(674806),K=n(479739),V=n(385740);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ie(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(i,e);var t,n,r,o=re(i);function i(){var e;ee(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return le(ie(e=o.call.apply(o,[this].concat(n))),"handleJoinBoardClick",(function(t){var n=t.event;n&&n.stopPropagation&&n.stopPropagation();var r=e.props,o=r.history,i=r.socialCollabGroupBoardPath||"";k.Z.increment("mweb.social.group_board.public.modal.display"),o.push({pathname:"/signup/step1/",state:{next:i,isFromGroupBoardsInvite:!0}})})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props.inviteObject,t=e?e.invite_channel:null;k.Z.increment("mweb.social.group_board.public.modal.display"),t&&k.Z.increment("mweb.social.group_board.public.invite_channel.".concat(t))}},{key:"render",value:function(){var e=this.props,t=e.viewType,n=e.viewParameter,r=e.inviteObject,o=e.board,i=r?r.sender:null,a=i?i.first_name:"",l=i?i.image_medium_url:"",s=i?i.full_name:"",u=a?(this.props.i18n._('{{ name }} invited you to join their board', 'Mobile Modal prompting users to join a friends({{ name }}) board', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",a):this.props.i18n._('Your friends invited you to join their board', 'Mobile Modal prompting users to join a friends board', 'Mobile Modal prompting users to join a friends board'),c=this.props.i18n._('Join board', 'Join Board Button', 'Join Board Button');return(0,y.jsx)($.Z,{viewType:t||202,viewParameter:n,component:13196,children:(0,y.jsx)(x,{isOpen:!0,onDismiss:function(){},type:"groupboard_join",children:o?(0,y.jsxs)(b.xu,{padding:3,children:[(0,y.jsxs)(b.xu,{children:[(0,y.jsxs)(b.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,y.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"5%"}},width:"48px",children:(0,y.jsx)(O.Z,{src:l||"",name:s||""})}),(0,y.jsx)(b.xu,{maxWidth:"74%",children:(0,y.jsx)(b.xv,{align:"start",overflow:"normal",weight:"bold",children:u})})]}),(0,y.jsx)(b.xu,{marginBottom:4})]}),(0,y.jsx)(b.zx,{fullWidth:!0,text:c,color:"red",type:"button",onClick:this.handleJoinBoardClick})]}):(0,y.jsx)(b.xu,{padding:3,children:(0,y.jsx)(b.$j,{show:!0,accessibilityLabel:this.props.i18n._('Loading Board', 'Accessiblity label for Spinner searching for board', 'Accessiblity label for Spinner searching for board')})})})})}}])&&te(t.prototype,n),r&&te(t,r),i}(r.PureComponent);function ue(e){var t=e.inviteObject,n=e.socialCollabGroupBoardPath,r=(0,w.ZP)(),i=(0,s.k6)(),a=(0,o.useSelector)((function(e){return e.session})).country,l=(0,V.SU)(),u=l.viewType,c=l.viewParameter,d=n&&n.split("?")[0]||"",p=(0,o.useSelector)((function(e){return(0,K.i3)(e)[d]}));return(0,y.jsx)(se,{board:p,country:a,history:i,i18n:r,inviteObject:t,socialCollabGroupBoardPath:n,viewParameter:c,viewType:u})}var ce=n(6637),de=n(700380),pe=n(842394);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return be(this,n)}}function be(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=6e5,je=function(e){return e>400},Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(i,e);var t,n,r,o=ge(i);function i(){var e;he(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xe(ve(e=o.call.apply(o,[this].concat(n))),"state",{isIdleTimerDeactivated:!1}),xe(ve(e),"inactiveTime",0),xe(ve(e),"handleIdleInactivity",(function(){var t=e.inactiveTime+500;k.Z.increment("mweb_unauth.idle_time.".concat(t)),e.inactiveTime=t,t>=we&&e.handleIdleDeactivate()})),xe(ve(e),"handleIdleDeactivate",(function(){e.state.isIdleTimerDeactivated||(clearInterval(e.idleId),e.setState({isIdleTimerDeactivated:!0}),window.removeEventListener("touchstart",e.handleIdleDeactivate),window.removeEventListener("touchend",e.handleIdleDeactivate),window.removeEventListener("touchcancel",e.handleIdleDeactivate),window.removeEventListener("touchmove",e.handleIdleDeactivate))})),xe(ve(e),"handleThrottledScrollForSignupModal",(0,de.Z)((function(t){var n=e.props.mobileSignupModalContext,r=n.showMobileSignupModal,o=n.upsellIsEnabledGlobally;!n.scrollControllerHasDisplayed&&je(t)&&o()&&r({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"scrollOnSharedPinPage"})}),500)),xe(ve(e),"handleScroll",(function(){var t=e.getScrollPos();e.handleIdleDeactivate(),e.handleThrottledScrollForSignupModal(t)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.idleId=setInterval(this.handleIdleInactivity,500),window.addEventListener("scroll",this.handleScroll),window.addEventListener("touchstart",this.handleIdleDeactivate),window.addEventListener("touchend",this.handleIdleDeactivate),window.addEventListener("touchcancel",this.handleIdleDeactivate),window.addEventListener("touchmove",this.handleIdleDeactivate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),this.handleIdleDeactivate()}},{key:"getScrollPos",value:function(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}},{key:"render",value:function(){return(0,y.jsx)(b.xu,{})}}])&&me(t.prototype,n),r&&me(t,r),i}(r.Component);function Pe(){var e=(0,pe.lv)();return e?(0,y.jsx)(Se,{mobileSignupModalContext:e}):null}var Ae=n(248975),Oe=n(125920),Ie=n(81072),Te=n(81759),ze=n(266725),ke=n(50286),Ce=n(870167),Ee=n(867820),Ze=n(217468);function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){var t=e.onDismiss,n=(0,w.ZP)(),i=(0,s.TH)(),a=(0,V.SU)(),l=a.viewType,u=a.viewParameter,c=function(){var e=(0,s.TH)(),t=(0,s.UO)();return(0,o.useSelector)((function(n){var r,o=t.id&&n.pins[t.id],i=(0,K.i3)(n)[e.pathname],a=null==i||null===(r=i.cover_pin)||void 0===r?void 0:r.pin_id,l=a&&o&&n.pins[a],s=o||l,u=(0,Ae.Z)(s)||i&&i.image_cover_url||"";return u?{color:(s||{}).dominant_color,src:u}:null}))}();return(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)(b.xu,{alignSelf:"end","data-test-id":"cancel-button",display:"flex",children:(0,y.jsx)(I.Z,{accessibilityLabel:n._('Cancel', 'unauth.mweb.floating_app_modal.cancel_button', 'Cancel IconButton on the floating app install modal prompting the users to download the app'),icon:"cancel",onTouch:function(e){var n=e;(0,Ee.tj)("mweb_unauth.float_app_upsell.dismiss_tap",{x:(null==n?void 0:n.pageX)||-1,y:(null==n?void 0:n.pageY)||-1}),(0,Ee.NC)("click_dismiss_float_app_upsell"),(0,ze.So)({component:13198,element:75,view_type:l,view_parameter:u}),(0,Ee.LW)({action:"click",pageLocation:i,item:"cancel-button",within:"unauth-floating-upsell"}),t()},size:"sm"})}),(0,y.jsxs)(b.xu,{children:[(0,y.jsxs)(b.xu,{"data-test-id":"interest-image",display:"flex",margin:2,children:[c&&(0,y.jsx)(b.xu,{minWidth:48,height:64,overflow:"hidden",rounding:2,marginEnd:4,children:(0,y.jsx)(b.Ee,{src:c.src,fit:"cover",naturalWidth:48,naturalHeight:64,color:c.color||"white",alt:"image"})}),(0,y.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,y.jsx)(b.xu,{children:(0,y.jsx)(b.xv,{weight:"bold",children:n._('Loving these ideas?', 'unauth.mweb.floating_app_modal.main_text', 'Top text on the floating app install modal prompting the users to download the app')})}),(0,y.jsx)(b.xv,{children:n._('Get the free Pinterest app to see more', 'unauth.mweb.floating_app_modal.main_text', 'Top text on the floating app install modal prompting the users to download the app')})]})]}),(0,y.jsx)(b.xu,{alignItems:"center",alignSelf:"center","data-test-id":"download-button",display:"flex",direction:"row",justifyContent:"center",marginBottom:3,marginStart:4,marginEnd:4,wrap:!0,children:(0,y.jsx)(m.Z,{componentType:13198,within:"unauth-floating-upsell",children:function(e){var t=e.handleOpenApp;return(0,y.jsx)(b.zx,{color:"red",onClick:function(){return t()},size:"md",text:n._('Download app', 'unauth.mweb.floating_app_modal', 'CTA on the app upsell modal')})}})})]})]})},Me=function(){var e=(0,w.ZP)(),t=(0,s.TH)();return(0,y.jsxs)(b.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:2,paddingY:4,children:[(0,y.jsx)(b.xu,{flex:"grow",children:(0,y.jsxs)(b.xu,{marginBottom:6,children:[(0,y.jsx)(b.xu,{marginBottom:2,children:(0,y.jsx)(b.X6,{overflow:"normal",size:"400",align:"center",children:e._('You are signed out', 'Heading on the bottom right upsell suggesting user is not signed in', 'Heading on the bottom right upsell suggesting user is not signed in')})}),(0,y.jsx)(b.xv,{overflow:"normal",align:"center",children:e._('Sign in to get the best experience', 'Subheader value prop on the bottom right upsell', 'Subheader value prop on the bottom right upsell')})]})}),(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)(z.Z,{facebookText:e._('Continue with Facebook', 'tablet.bottomrightupsell.loginbuttons', 'Facebook login button on mweb tablet bottom right upsell'),googleText:e._('Continue with Google', 'tablet.bottomrightupsell.loginbuttons', 'Google login button on mweb tablet bottom right upsell'),lineText:e._('Continue with LINE', 'tablet.bottomrightupsell.loginbuttons', 'Line login button on mweb tablet bottom right upsell'),showEmailButton:!0,showLoginButtons:!1,next:(0,Te.Yy)(t)}),(0,y.jsx)(b.xu,{paddingX:6,marginTop:-3,children:(0,y.jsx)(E.Z,{})})]})]})};function Ue(e){var t=e.onDismiss,n=(0,Ce.a)(),o=!(null==n||!n.hasScrolledPastMainContent),i=!(null==n||!n.hasDraggedDrawerToFullScreen),a=(0,ke.Wb)(),l=(0,s.TH)(),u=(0,Ie.Z)(),c=De((0,r.useState)(!1),2),p=c[0],f=c[1],h=(0,V.SU)(),m=h.viewType,_=h.viewParameter,g=(0,Ze.tc)("lex_bottom_align_app_upsell"),v=((0,Ze.aq)("mweb_better_related_pins_drawer").group||"").includes("draggable"),x=(0,d.uM)(l);return(0,r.useEffect)((function(){x?f(o||v&&i):u>200?f(!0):a&&f(!1)}),[u,a,o,v,i,x]),(0,y.jsx)($.Z,{viewType:m||202,viewParameter:_,component:13130,children:(0,y.jsx)(b.xu,{borderStyle:"shadow","data-test-id":"floating-app-upsell",rounding:a?6:8,padding:a?4:2,display:"flex",direction:"column",top:!(a||g().anyEnabled),bottom:a||g().anyEnabled,left:!a,right:!0,marginStart:a?0:"auto",marginEnd:a?4:"auto",maxWidth:a?350:360,justifyContent:a?"center":void 0,alignItems:a?"center":void 0,color:"white",opacity:1,zIndex:new b.Ry(1e4),dangerouslySetInlineStyle:{__style:{transition:"transform 225ms ease-in-out",transform:a||"enabled_sticky"!==g().group?"enabled"===g().group?"translateY(".concat(p?0:a?145:120,"%)"):"translateY(".concat(p?0:a?145:-120,"%)"):void 0,marginBottom:a?84:void 0}},position:"fixed",children:a?(0,y.jsx)(Me,{}):(0,y.jsx)(Be,{onDismiss:t})})})}function Fe(e){var t=e.setShouldShowAppUpsellFooter,n=(0,V.SU)(),o=n.viewType,i=n.viewParameter,a=De((0,r.useState)(!1),2),l=a[0],s=a[1],u=(0,Oe.Z)(),c=(0,ke.Wb)(),d=(0,Ze.tc)("pcons_footer_after_dismiss"),p=(0,Ze.aq)("mweb_primary_app_upsell_modal",u).group.includes("no_upsell");return(0,y.jsx)($.Z,{viewType:o||202,viewParameter:i,component:13198,children:(0,y.jsx)(b.xu,{children:u&&!l&&!p&&(0,y.jsx)(Ue,{onDismiss:function(){s(!0),!c&&d().anyEnabled&&t&&t()}})})})}var Re=n(949372),He=n(19121),Ne=n(185894),We=n(687999),Ye=n(915832),Ge=function(){var e=(0,He.Z)(),t=e&&e.isAuth,n=(0,o.useSelector)((function(e){var t=e.session;return(0,Ye.Xn)((0,Ye.an)(t.referrer))})),r=(0,o.useSelector)((function(e){var t=e.session;return t.unauthSavePinId&&!t.isAuthenticated})),i=(0,We.f)(),a=i.unauthFollowUserId,l=i.removeUnauthFollowUserId,s=a&&t,u=(0,o.useDispatch)();return function(){r&&u((0,Ne.n1)()),s&&l(),(0,Ee.NC)("hide_dismissable_modal"),(0,Ee.My)("mweb.unauth_dismiss_modal");var e,t,o=c.ZP.sessionStorage.getItem("sumdc")||0;o+=1,c.ZP.sessionStorage.setItem("sumdc",o),n&&1===o&&(e=6e4,t="susdd",c.ZP.sessionStorage.getItem(t)||c.ZP.sessionStorage.setItem(t,e),c.ZP.sessionStorage.setItem("susdst",(new Date).getTime()))}},Je=n(829407),qe=n(631193),Xe=n(994344);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ve=[5,18,17,6,19],Qe=(0,r.lazy)((function(){return n.e(86560).then(n.bind(n,100650))})),et=function(e){var t=e.invite,n=Ge(),r=(0,ke.ZP)(),o=(0,pe.lv)();if(!o||!o.modal.isShown)return null;var i=o.dismissMobileSignupModal,l=o.modal.displayProps;return(0,y.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_SignupModal",children:(0,y.jsx)(h.Z,{fallback:(0,y.jsx)(b.xu,{}),children:(0,y.jsx)(Qe,{displayProps:l,inviteObject:l.isScrollingModal?t:void 0,isTablet:"tablet"===r,onDismiss:function(){i(),l.isScrollingModal||n()}})})})};function tt(){var e=(0,s.TH)(),t=function(){var e=(0,Xe.vE)(),t=(0,s.TH)(),n=t===$e((0,r.useState)(t),1)[0]&&(0,d.Fw)(t)||null,o=$e((0,r.useState)(null),2),i=o[0],a=o[1];return(0,Je.Z)((function(){e&&n&&ce.ZP.create("InviteCodeMetadataResource",{invite_code:e}).callGet().then((function(e){var t,n;return a(null!==(t=null===(n=e.resource_response)||void 0===n?void 0:n.data)&&void 0!==t?t:null)})).catch((function(){}))})),e&&n?{invite:i,pageType:n}:null}(),n=(0,o.useDispatch)(),i=(0,Re.Z)(),l=(0,o.useSelector)((function(e){return e.session.unauthInterstitialDismissed})),u=(0,qe.Z)(),c=(0,Ze.tc)("pcons_in_feed_app_upsell"),p=u&&!l&&"enabled_static_remove"!==c().group,f=$e((0,r.useState)(!1),2),g=f[0],v=f[1],x=(0,pe.lv)(),w=$e((0,r.useState)(!1),2),j=w[0],S=w[1],P=!(null==x||!x.modal.isShown),O=(0,V.SU)().viewType;(0,r.useEffect)((function(){P&&(S(!0),n((0,Ne.W)()))}),[P,n]);var I=P&&(0,y.jsx)(et,{});if(!I&&t&&t.invite){var T,z=t.invite,k=t.pageType;"board"===k&&4===(null===(T=z.sender)||void 0===T?void 0:T.invite_category)?I=(0,y.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_GroupBoardsJoinModal",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(ue,{inviteObject:z,socialCollabGroupBoardPath:"".concat(e.pathname).concat(e.search)})})}):Ve.includes(z.invite_channel)&&!j?I=(0,y.jsx)(X,{invite:z,onDismiss:function(){return S(!0)}}):"profile"!==k&&i&&(I=(0,y.jsx)(A,{invite:z}))}return(0,y.jsxs)(r.Fragment,{children:[p&&(0,y.jsx)(Fe,{setShouldShowAppUpsellFooter:function(){return v(!0)}}),g&&i&&(0,y.jsx)(m.Z,{within:"footer-button",children:function(e){var t=e.handleOpenApp;return(0,y.jsx)(_.Z,{onOpenInApp:function(){return t()},viewType:O})}}),(0,y.jsxs)(b.xu,{children:["pin"===(null==t?void 0:t.pageType)&&(0,y.jsx)(Pe,{}),I]})]})}var nt=n(743413),rt=n(297507),ot=n(3223);var it=n(332611),at=n(436851),lt=n(693099),st=n(826067),ut=n(597897),ct=n(499128),dt=n(967053),pt=n(343341),ft=n(584595);function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _t="keychainAutologinDisabled",gt="mweb.unauth.ios_keychain_autologin";function bt(){var e=ht((0,r.useState)(""),2),t=e[0],n=e[1],i=ht((0,r.useState)(""),2),a=i[0],l=i[1],c=(0,r.useRef)(!1),d=!!t&&!!a,p=(0,r.useRef)(),f=(0,o.useDispatch)(),h=(0,s.k6)(),m=(0,s.TH)(),_=(0,w.ZP)(),g=(0,pt.F9)().showToast,v=(0,Ze.tc)("mweb_unauth_shared_page_wrapper_autologin");(0,r.useEffect)((function(){p.current&&p.current.focus()}),[]);var x=function(e){var t=e.errorReason,n=e.errorCode,r=e.errorMessage,o=t||n===ft.oP?"invalid_password":n===ft.hU?"invalid_email":"login";(0,Ee.My)("".concat(gt,".failure.").concat(o)),(0,u.Nh)(_t,!0),h.push({pathname:"/login",state:{keychainiOSAutologinError:{code:n,message:r}}})},j=function(e){(0,ze.j)({event_type:e,view_type:9,view_parameter:63,aux_data:{signup_login_method:1}})};(0,r.useEffect)((function(){c.current!==d&&(c.current=d,(0,u.Nh)(_t,!0),f((0,dt.x4)({username_or_email:t,password:a},h,m.pathname,{isAutologin:!0},v)).then((function(){g((function(e){var t=e.hideToast;return(0,y.jsx)(ct.ZP,{text:_._('You\'re logged in!', 'mweb.unauth.ios_keychain_autologin.login_success_toast', 'Toast to alert user they are being logged in'),onHide:t})})),(0,Ee.My)("".concat(gt,".login_success")),j(7536)})).catch((function(e){j(7535),x({errorCode:e.apiErrorCode,errorMessage:e.message})})))}));var S=function(e){var t=e.value,r=e.type;1!==t.length?"email"===r?n(t):l(t):x({errorReason:"manual_input_attempt"})},P=function(){d||(0,Ee.My)("".concat(gt,".failure.user_dismissed_prompt")),(0,u.Nh)(_t,!0)};return(0,y.jsx)(b.xu,{position:"absolute",top:!0,opacity:0,dangerouslySetInlineStyle:{__style:{zIndex:-100}},children:(0,y.jsxs)("form",{onSubmit:function(e){e.preventDefault()},autoComplete:"on","aria-hidden":"true",children:[(0,y.jsx)(b.nv,{autoComplete:"username",id:"username",onChange:function(e){var t=e.value;return S({value:t,type:"email"})},ref:p,size:"lg",type:"email",value:t,onBlur:P}),(0,y.jsx)(b.nv,{autoComplete:"current-password",id:"current-password",onChange:function(e){var t=e.value;return S({value:t,type:"password"})},size:"lg",type:"password",value:a,onBlur:P})]})})}var vt=n(957161),yt=n(226198);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var St=(0,r.lazy)((function(){return n.e(97247).then(n.bind(n,297247))})),Pt=(0,r.lazy)((function(){return n.e(47711).then(n.bind(n,847711))})),At=function(){try{var e=JSON.parse((0,vt.qn)("unauthRevisitation")),t=e.count,n=e.time;return"number"==typeof t&&"number"==typeof n?{count:t,time:n}:null}catch(r){return null}},Ot=function(e){(0,vt.Nh)("unauthRevisitation",JSON.stringify(e))};function It(){var e=(0,ke.ZP)(),t=(0,s.k6)(),n=(0,s.TH)(),c=(0,ut.U)();(0,r.useEffect)((function(){c&&setTimeout((function(){c.load(new URL("login.js","file://"))}),500)}),[]);var p=(0,o.useSelector)((function(e){return e.session})),m=p.browser,_=p.googleOneTapShouldBeHidden,g=p.isSeoBot,b=p.referrer,v=(0,pe.lv)(),x=n&&n.search?(0,st.mB)(n.search):"",w=!!x&&"1"===x.ur,j=(0,r.useRef)(!1);(0,r.useEffect)((function(){!j.current&&w&&(0,l.C)(n),j.current=w})),(0,r.useEffect)((function(){(0,Ee.hL)("mweb.unauth_seo.referrer",{referrer:b,docReferrer:document.referrer,cookieReferrer:i.U2(yt.tg)})}),[b]),function(){var e=(0,o.useSelector)((function(e){return e.session})),t=e.unauthId,n=e.country,i=e.isSeoBot,a=e.region_from_ip;(0,r.useEffect)((function(){(0,ot.c_)({country:n,isBot:i})&&(0,rt.X)({id:nt.Un,eventName:"Mobile"}),(0,ot.$r)({country:n,regionFromIp:a,isBot:i})&&(0,rt.Kv)({id:"flashtalking-m-ses",eventName:"Mobile"}),(0,ot.NR)(n,a,i)&&t&&(0,rt.kQ)({unauthId:t}),(0,ot.Fc)({country:n,isBot:i})&&t&&(0,rt.o4)({unauthId:t})}),[n,t,i,a])}(),function(){var e=(0,s.TH)(),t=(0,o.useDispatch)(),n=(0,o.useSelector)((function(e){return e.session})),r=n.isSeoBot,a=n.userAgent;(0,Je.Z)((function(){if((e.search||"").includes("amp_client_id")&&(0,Ee.My)("amp_duplo_redirect"),!r){t((0,it.pz)([1000180],r)),(0,Te.Yi)().then((function(e){t((0,Ne.iW)(e))}),(function(e){t((0,Ne.iW)())}));var n=At();!n||n.count<1||!n.time?Ot(n={count:1,time:0}):(new Date).getTime()-n.time>6e5&&(n=wt(wt({},n),{},{count:n.count+1}),Ot(n)),(0,ze.j)({event_type:7686,view_type:51,aux_data:{unauth_revisitation:n.count,unauth_previously_logged_out:i.U2(yt.e7)}}),window.addEventListener("unload",(function(){var e,t;Ot({count:null!==(e=null===(t=At())||void 0===t?void 0:t.count)&&void 0!==e?e:1,time:(new Date).getTime()})}))}(0,at.$)(a)&&(0,u.Nh)("openUnauthType",lt.zu)}))}();var S=!g&&"Mobile Safari"===m&&((0,d.bo)(n)||(0,d.J3)(n)||(0,d.uM)(n)||(0,d.am)(n))&&!(0,u.qn)(_t,!1),P=!(_||(0,d.re)(n)||(0,d.OK)(n)||(0,d.Ni)(n)||"desktop"===e&&((0,d.C$)(n)||(0,d.Xn)(n)||(0,d.HV)(n)||(0,d.kY)(n)||"/invited"===n.pathname||n.pathname.startsWith("/about/")));return(0,y.jsxs)(r.Fragment,{children:[!(0,d.re)(n)&&(0,y.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_AutoLogin",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(St,{crossDomain:!0,fb:!0,google:!0,history:t,location:n,smartlock:!0})})}),P&&(0,y.jsx)(a.Z,{name:"SafeSuspense_UnauthPageWrapper_GoogleOneTap",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(Pt,{})})}),S&&(0,y.jsx)(bt,{}),"desktop"!==e&&(0,y.jsx)(tt,{}),v&&(0,y.jsx)(f,{context:v})]})}},2284:function(e,t,n){var r=n(664229),o=n(452740);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61052-7ac3c291c18e9cd6.js.map